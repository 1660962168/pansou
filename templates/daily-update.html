{% extends 'index_base.html' %}

{% block title %}每日更新 - 基德资源搜索站{% endblock %}

{% block head %}
<style>
    /* --- 每日更新页专用样式 --- */

    /* 搜索栏微调 */
    .daily-search-wrapper {
        margin: 20px 16px;
    }

    .daily-search-box {
        display: flex;
        background: #fff;
        border: 1px solid #e2e8f0;
        border-radius: 50px;
        padding: 10px;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.03);
    }

    .daily-search-box input {
        flex: 1;
        border: none;
        background: transparent;
        font-size: 14px;
        color: #333;
    }

    .daily-search-box button {
        background: #2563eb;
        color: white;
        border: none;
        border-radius: 20px;
        padding: 10px 30px;
        font-size: 13px;
        font-weight: 500;
        cursor: pointer;
    }

    /* 顶部 Tabs (电视剧/电影) */
    .segment-tabs {
        background: #f0f0f5;
        margin: 0 16px 15px 16px;
        border-radius: 12px;
        padding: 4px 10px;
        display: flex;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.02);
    }

    .segment-tab-item {
        flex: 1;
        text-align: center;
        padding: 10px 0;
        font-size: 15px;
        color: #64748b;
        cursor: pointer;
        border-radius: 8px;
        font-weight: 500;
        transition: all 0.2s;
    }

    .segment-tab-item.active {
        background: #fff;
        color: #2563eb;
        font-weight: bold;
        box-shadow: 0 2px 6px rgba(0, 0, 0, 0.05);
        border: 1px solid #f1f5f9;
    }

    /* 提示文字 */
    .list-hint {
        text-align: right;
        font-size: 12px;
        color: #94a3b8;
        margin: 0 20px 10px 0;
        display: flex;
        align-items: center;
        justify-content: flex-end;
    }

    .list-hint i {
        margin-left: 4px;
    }

    /* 资源列表 */
    .resource-list {
        padding: 0 16px;
        margin-bottom: 30px;
    }

    .resource-item {
        background: #fff;
        border-radius: 12px;
        padding: 16px;
        margin-bottom: 12px;
        display: flex;
        align-items: center;
        justify-content: space-between;
        box-shadow: 0 1px 2px rgba(0, 0, 0, 0.02);
        border: 1px solid #f1f5f9;
        transition: transform 0.2s;
    }

    .resource-item:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
    }

    .res-info {
        flex: 1;
        display: flex;
        flex-direction: column;
        justify-content: center;
    }

    .res-row {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-right: 10px;
    }

    .res-title {
        font-size: 15px;
        font-weight: 600;
        color: #1e293b;
        margin-right: 8px;
    }

    .res-status {
        font-size: 12px;
        color: #3b82f6;
        font-weight: 500;
    }

    /* 右侧图标组 */
    .res-actions {
        display: flex;
        gap: 8px;
    }

    .icon-btn {
        width: 36px;
        height: 36px;
        border-radius: 10px;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        font-size: 16px;
        text-decoration: none;
        transition: all .15s ease;
        padding: 5px;
    }

    .icon-btn:active {
        transform: scale(0.95);
    }

    .icon-quark {
        background: linear-gradient(135deg, #fef3c7, #fde68a);
    }

    .icon-cloud {
        background: linear-gradient(135deg, #dbeafe, #bfdbfe);
    }

    /* 底部大按钮 */
    .bottom-search-btn-wrapper {
        padding: 0 16px 40px 16px;
        text-align: center;
    }

    .full-search-btn {
        width: 100%;
        background: linear-gradient(135deg, #2563eb 0%, #1d4ed8 100%);
        color: white;
        padding: 14px 0;
        border-radius: 50px;
        border: none;
        font-size: 15px;
        font-weight: 600;
        box-shadow: 0 4px 15px rgba(37, 99, 235, 0.3);
        cursor: pointer;
    }

    .bottom-hint-text {
        font-size: 12px;
        color: #94a3b8;
        margin-bottom: 15px;
        text-align: center;
    }

    /* --- 新增：侧边栏样式 (默认隐藏) --- */
    .daily-sidebar {
        display: none;
    }

    .sidebar-card {
        background: #fff;
        border-radius: 12px;
        padding: 20px;
        margin-bottom: 20px;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.02);
        border: 1px solid #f1f5f9;
    }

    .sidebar-header {
        font-size: 16px;
        font-weight: 700;
        margin-bottom: 15px;
        display: flex;
        align-items: center;
        border-left: 4px solid #2563eb;
        /* 蓝色竖条装饰 */
        padding-left: 10px;
        color: #1f2937;
    }

    .hot-list-item {
        display: flex;
        align-items: center;
        padding: 10px 0;
        border-bottom: 1px dashed #f1f5f9;
        font-size: 14px;
        color: #4b5563;
        cursor: pointer;
        transition: all 0.2s;
    }

    .hot-list-item:hover {
        color: #2563eb;
        padding-left: 5px;
        /* 悬停轻微右移 */
    }

    .hot-list-item:last-child {
        border-bottom: none;
    }

    .hot-rank-num {
        width: 20px;
        height: 20px;
        border-radius: 4px;
        background: #f1f5f9;
        color: #9ca3af;
        font-size: 12px;
        font-weight: bold;
        display: flex;
        align-items: center;
        justify-content: center;
        margin-right: 12px;
    }

    /* 前三名高亮 */
    .hot-list-item:nth-child(1) .hot-rank-num {
        background: #ef4444;
        color: white;
    }

    .hot-list-item:nth-child(2) .hot-rank-num {
        background: #f97316;
        color: white;
    }

    .hot-list-item:nth-child(3) .hot-rank-num {
        background: #eab308;
        color: white;
    }

    .hot-heat {
        margin-left: auto;
        font-size: 12px;
        color: #94a3b8;
    }

    .daily-layout {
        width: 100%;
    }

    /* =========================================
       重点：电脑端适配 (双栏布局)
       ========================================= */
    @media (min-width: 992px) {

        /* 使用 Flex 布局实现左右分栏 */
        .daily-layout {
            display: flex;
            align-items: flex-start;
            /* 顶部对齐 */
            gap: 24px;
            align-items: baseline;
        }

        .daily-main {
            flex: 1;
            /* 左侧占满剩余空间 */
            min-width: 0;
        }

        .daily-sidebar {
            display: block;
            /* 显示侧边栏 */
            width: 300px;
            /* 固定宽度 */
            flex-shrink: 0;
            position: sticky;
            /* 吸附效果 */
            top: 80px;
            /* 距离顶部导航栏的高度 */
        }


        .resource-item {
            padding: 20px;
        }
    }
</style>
{% endblock %}

{% block content %}
<div class="daily-layout">

    <div class="daily-main">
        <div class="daily-search-wrapper">
            <div class="daily-search-box">
                <input type="text" placeholder="输入剧名即可，无需添加「第x季」">
                <button>搜索</button>
            </div>
        </div>

        <div class="segment-tabs">
            <div class="segment-tab-item active" onclick="switchDailyTab('tv')">电视剧</div>
            <div class="segment-tab-item" onclick="switchDailyTab('movie')">电影</div>
        </div>
        <div class="list-hint">
            点击右侧网盘图标获取链接 <i class="ri-arrow-down-line"></i> <i class="ri-arrow-down-line"></i>
        </div>
        <div id="daily-tv-list" class="resource-list">
            <div class="resource-item">
                <div class="res-info">
                    <div class="res-row">
                        <span class="res-title">生命树</span>
                        <span class="res-status">更新: 30 19点30更新</span>
                    </div>
                </div>
                <div class="res-actions">
                    <div class="icon-btn icon-quark" @click="showBanner=true">
                        <img src="{{ url_for('static', filename='images/quark.svg') }}" alt="">
                    </div>
                    <div class="icon-btn icon-cloud" @click="showBanner=true">
                        <img src="{{ url_for('static', filename='images/baidu.svg') }}" alt="">
                    </div>
                </div>
            </div>
        </div>

        <div id="daily-movie-list" class="resource-list" style="display: none;">
            <div class="resource-item">
                <div class="res-info">
                    <div class="res-row">
                        <span class="res-title">生命树</span>
                        <span class="res-status">更新: 30 19点30更新</span>
                    </div>
                </div>
                <div class="res-actions">
                    <div class="icon-btn icon-quark" @click="showBanner=true">
                        <img src="{{ url_for('static', filename='images/quark.svg') }}" alt="">
                    </div>
                    <div class="icon-btn icon-cloud" @click="showBanner=true">
                        <img src="{{ url_for('static', filename='images/baidu.svg') }}" alt="">
                    </div>
                </div>
            </div>
        </div>

        <div class="bottom-search-btn-wrapper">
            <div class="bottom-hint-text">结果不满意？试试全网搜，覆盖更全</div>
            <button class="full-search-btn">全网搜「更多资源」</button>
        </div>
    </div>

    <div class="daily-sidebar">
        <div class="sidebar-card">
            <div class="sidebar-header">热门榜单</div>

            <div class="hot-list-item">
                <div class="hot-rank-num">1</div>
                <div>成何体统</div>
                <div class="hot-heat"><i class="ri-fire-line"></i> 9.8w</div>
            </div>
            <div class="hot-list-item">
                <div class="hot-rank-num">2</div>
                <div>太平年</div>
                <div class="hot-heat"><i class="ri-fire-line"></i> 8.5w</div>
            </div>
            <div class="hot-list-item">
                <div class="hot-rank-num">3</div>
                <div>阿凡达</div>
                <div class="hot-heat"><i class="ri-fire-line"></i> 7.2w</div>
            </div>
            <div class="hot-list-item">
                <div class="hot-rank-num">4</div>
                <div>年少有为</div>
                <div class="hot-heat">6.1w</div>
            </div>
            <div class="hot-list-item">
                <div class="hot-rank-num">5</div>
                <div>生命树</div>
                <div class="hot-heat">5.9w</div>
            </div>
            <div class="hot-list-item">
                <div class="hot-rank-num">6</div>
                <div>怪奇物语</div>
                <div class="hot-heat">4.2w</div>
            </div>
            <div class="hot-list-item">
                <div class="hot-rank-num">7</div>
                <div>唐宫奇案</div>
                <div class="hot-heat">3.8w</div>
            </div>
            <div class="hot-list-item">
                <div class="hot-rank-num">8</div>
                <div>绝命毒师</div>
                <div class="hot-heat">3.5w</div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
    // Tab 切换逻辑
    function switchDailyTab(type) {
        const tabs = document.querySelectorAll('.segment-tab-item');
        const tvList = document.getElementById('daily-tv-list');
        const movieList = document.getElementById('daily-movie-list');

        if (type === 'tv') {
            tabs[0].classList.add('active');
            tabs[1].classList.remove('active');
            tvList.style.display = 'block';
            movieList.style.display = 'none';
        } else {
            tabs[0].classList.remove('active');
            tabs[1].classList.add('active');
            tvList.style.display = 'none';
            movieList.style.display = 'block';
        }
    }

    // 自动高亮底部导航栏的 "每日更新" 图标
    document.addEventListener("DOMContentLoaded", function () {
        setTimeout(function () {
            const tabItems = document.querySelectorAll('.mobile-tab-bar .tab-item');
            if (tabItems.length >= 2) {
                // 移除首页的高亮
                tabItems[0].classList.remove('active');
                const homeIcon = tabItems[0].querySelector('i');
                if (homeIcon) homeIcon.className = 'ri-home-5-line';

                // 高亮第二个 (每日更新)
                tabItems[1].classList.add('active');
                const dailyIcon = tabItems[1].querySelector('i');
                if (dailyIcon) dailyIcon.className = 'ri-calendar-check-fill';
            }
        }, 100);
    });
</script>
{% endblock %}