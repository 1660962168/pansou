{% extends 'index_base.html' %}

{% block title %}基德资源搜索站{% endblock %}

{% block head %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/daily-update.css') }}">
{% endblock %}

{% block content %}
<div class="daily-layout">

    <div class="daily-main">
        <div class="daily-search-wrapper">
            <div class="daily-search-box">
                <input type="text" placeholder="输入剧名即可，无需添加「第x季」">
                <button>搜索</button>
            </div>
        </div>

        <div class="segment-tabs">
            <div class="segment-tab-item active" onclick="switchDailyTab('tv')">电视剧</div>
            <div class="segment-tab-item" onclick="switchDailyTab('movie')">电影</div>
        </div>
        <div class="list-hint">
            点击右侧网盘图标获取链接 <i class="ri-arrow-down-line"></i> <i class="ri-arrow-down-line"></i>
        </div>
        <div id="daily-tv-list" class="resource-list">
            <div class="resource-item">
                <div class="res-info">
                    <div class="res-row">
                        <span class="res-title">生命树</span>
                        <span class="res-status">更新: 30 19点30更新</span>
                    </div>
                </div>
                <div class="res-actions">
                    <div class="icon-btn icon-quark" @click="ObtainResources_quark()">
                        <img src="{{ url_for('static', filename='images/quark.svg') }}" alt="">
                    </div>

                    <div class="icon-btn icon-cloud" @click="ObtainResources_baidu()">
                        <img src="{{ url_for('static', filename='images/baidu.svg') }}" alt="">
                    </div>
                </div>
            </div>
        </div>

        <div id="daily-movie-list" class="resource-list" style="display: none;">
            <div class="resource-item">
                <div class="res-info">
                    <div class="res-row">
                        <span class="res-title">生命树</span>
                        <span class="res-status">更新: 30 19点30更新</span>
                    </div>
                </div>
                <div class="res-actions">
                    <div class="icon-btn icon-quark" @click="ObtainResources_quark()">
                        <img src="{{ url_for('static', filename='images/quark.svg') }}" alt="">
                    </div>

                    <div class="icon-btn icon-cloud" @click="ObtainResources_baidu()">
                        <img src="{{ url_for('static', filename='images/baidu.svg') }}" alt="">
                    </div>
                </div>
            </div>
        </div>

        <div class="bottom-search-btn-wrapper">
            <div class="bottom-hint-text">结果不满意？试试全网搜，覆盖更全</div>
            <button class="full-search-btn">全网搜「更多资源」</button>
        </div>
    </div>

    <div class="daily-sidebar">
        <div class="sidebar-card">
            <div class="sidebar-header">热门榜单</div>

            <div class="hot-list-item">
                <div class="hot-rank-num">1</div>
                <div>成何体统</div>
                <div class="hot-heat"><i class="ri-fire-line"></i> 9.8w</div>
            </div>
            <div class="hot-list-item">
                <div class="hot-rank-num">2</div>
                <div>太平年</div>
                <div class="hot-heat"><i class="ri-fire-line"></i> 8.5w</div>
            </div>
            <div class="hot-list-item">
                <div class="hot-rank-num">3</div>
                <div>阿凡达</div>
                <div class="hot-heat"><i class="ri-fire-line"></i> 7.2w</div>
            </div>
            <div class="hot-list-item">
                <div class="hot-rank-num">4</div>
                <div>年少有为</div>
                <div class="hot-heat">6.1w</div>
            </div>
            <div class="hot-list-item">
                <div class="hot-rank-num">5</div>
                <div>生命树</div>
                <div class="hot-heat">5.9w</div>
            </div>
            <div class="hot-list-item">
                <div class="hot-rank-num">6</div>
                <div>怪奇物语</div>
                <div class="hot-heat">4.2w</div>
            </div>
            <div class="hot-list-item">
                <div class="hot-rank-num">7</div>
                <div>唐宫奇案</div>
                <div class="hot-heat">3.8w</div>
            </div>
            <div class="hot-list-item">
                <div class="hot-rank-num">8</div>
                <div>绝命毒师</div>
                <div class="hot-heat">3.5w</div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
    // Tab 切换逻辑
    function switchDailyTab(type) {
        const tabs = document.querySelectorAll('.segment-tab-item');
        const tvList = document.getElementById('daily-tv-list');
        const movieList = document.getElementById('daily-movie-list');

        if (type === 'tv') {
            tabs[0].classList.add('active');
            tabs[1].classList.remove('active');
            tvList.style.display = 'block';
            movieList.style.display = 'none';
        } else {
            tabs[0].classList.remove('active');
            tabs[1].classList.add('active');
            tvList.style.display = 'none';
            movieList.style.display = 'block';
        }
    }

    // 自动高亮底部导航栏的 "每日更新" 图标
    document.addEventListener("DOMContentLoaded", function () {
        setTimeout(function () {
            const tabItems = document.querySelectorAll('.mobile-tab-bar .tab-item');
            if (tabItems.length >= 2) {
                // 移除首页的高亮
                tabItems[0].classList.remove('active');
                const homeIcon = tabItems[0].querySelector('i');
                if (homeIcon) homeIcon.className = 'ri-home-5-line';

                // 高亮第二个 (每日更新)
                tabItems[1].classList.add('active');
                const dailyIcon = tabItems[1].querySelector('i');
                if (dailyIcon) dailyIcon.className = 'ri-calendar-check-fill';
            }
        }, 100);
    });
</script>
{% endblock %}