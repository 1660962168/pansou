<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}{% endblock %}</title>
    <link href="https://cdn.jsdelivr.net/npm/remixicon@3.5.0/fonts/remixicon.css" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/component.css') }}">
    <style>
        .banner-qr-overlay {
            display: flex;
            /* 保持居中布局 */
        }

        .top-notice {
            cursor: pointer;
        }
    </style>
    {% block head %}{% endblock %}
</head>

<body>
    <div id="app">

        <div class="top-notice" v-if="showNotice" @click="showBanner = true">
            <span>资源失效/没找到？扫码进群帮你解决 ></span>
            <div class="close-btn" @click.stop="hideNotice">
                <i class="ri-close-line"></i>
            </div>
        </div>

        <header class="main-header">
            <div class="header-inner">
                <div class="logo-area">
                    <i class="ri-cloud-fill logo-icon"></i>
                    <span>基德资源搜索站</span>
                </div>
                <nav class="desktop-nav">
                    <a href="/" class="{{ 'active' if request.path == '/' else '' }}">首页</a>
                    <a href="/daily-update" class="{{ 'active' if request.path == '/daily-update' else '' }}">每日更新</a>
                    <a href="/drama" class="{{ 'active' if request.path == '/drama' else '' }}">短剧专区</a>
                    <a href="/hot" class="{{ 'active' if request.path == '/hot' else '' }}">热门榜单</a>
                    <a href="#" @click="help = true">求片通道</a>
                </nav>
                <div class="mobile-menu-btn" @click="menu = true">
                    <i class="ri-menu-line"></i>
                </div>
            </div>
        </header>

        <main class="container">
            {% include 'dialog/dialog-base.html' %}

            {% block content %}{% endblock %}
        </main>

        <div class="fab-btn" @click="showBanner = true">
            <i class="ri-qr-code-line" style="font-size: 24px;"></i>
            <p>扫码进群</p>
        </div>

        <div class="mobile-tab-bar">
            <a href="/" class="tab-item {{ 'active' if request.path == '/' else '' }}">
                <i class="ri-home-5-line"></i><span>首页</span>
            </a>

            <a href="/daily-update" class="tab-item {{ 'active' if request.path == '/daily-update' else '' }}">
                <i class="ri-calendar-event-line"></i><span>每日更新</span>
            </a>

            <a href="/drama" class="tab-item {{ 'active' if request.path == '/drama' else '' }}">
                <i class="ri-movie-line"></i><span>短剧</span>
            </a>

            <a href="/global-search" class="tab-item {{ 'active' if request.path == '/global-search' else '' }}">
                <i class="ri-search-line"></i><span>全网搜</span>
            </a>
        </div>

    </div>

    {% block scripts %}{% endblock %}

    <script src="{{ url_for('static', filename='js/vue.js') }}"></script>
    <script>
        var app = new Vue({
            el: "#app",
            delimiters: ['${', '}'],
            data() {
                return {
                    showBanner: false,
                    showNotice: true,
                    menu: false,
                    help: false,
                    dialog_overlay: false,
                    showTip: true,
                    // --- 新增变量开始 ---
                    dialogTitle: '夸克APP', // 弹窗标题中的APP名称
                    dialogTips: '打开夸克APP - 搜索框 - 相机图标 - 扫码', // 扫码提示语
                    showPwdHint: false, // 是否显示提取码
                    showYellowTip: true // 是否显示黄色提示条
                    // --- 新增变量结束 ---
                };
            },
            methods: {
                hideNotice() {
                    this.showNotice = false;
                },
                // 点击夸克图标触发
                ObtainResources_quark() {
                    this.dialogTitle = '夸克APP';
                    this.dialogTips = '打开夸克APP - 搜索框 - 相机图标 - 扫码';
                    this.showPwdHint = false; // 夸克不显示提取码
                    this.showYellowTip = true; // 夸克显示防和谐提示
                    this.dialog_overlay = true; // 打开弹窗
                },
                // 点击百度网盘图标触发
                ObtainResources_baidu() {
                    this.dialogTitle = '百度网盘';
                    this.dialogTips = '打开百度网盘APP - 扫一扫';
                    this.showPwdHint = true; // 百度显示提取码
                    this.showYellowTip = false; // 百度隐藏黄色提示
                    this.dialog_overlay = true; // 打开弹窗
                }
            },
            mounted() {
                console.log("Vue is running...");
            },
        });
    </script>
</body>

</html>